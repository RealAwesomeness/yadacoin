{% with title='YadaCoin - Network Hashrate Chart', mixpanel='hashrate page' %}
  {% include 'head.html'  %}
{% endwith %} 
<body class="container bg-dark" data-spy="scroll" data-target=".onpage-navigation" data-offset="60">
    <main class="module bg-dark">
        <div class="page-loader">
        <div class="loader">Loading...</div>
        </div>
        <div class="main home-section bg-dark">
            <section class="module bg-dark" id="about">
                {% with active='guide' %}
                {% include 'navigation.html'  %}
                {% endwith %} 
                <h1>Hashrate</h1>
                <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
                <script src="https://code.highcharts.com/highcharts.js"></script>
                <script src="https://code.highcharts.com/modules/exporting.js"></script>
                <script src="https://code.highcharts.com/modules/export-data.js"></script>
                <script type="text/javascript">
                    $.getJSON(
                    '/api-stats',
                    function (res) {
                        var data = []
                        res.stats.periods.forEach(function(block) {
                            data.push([Number(block.index + 1), Number(block.hashrate)])
                        })
                        Highcharts.chart('container', {
                        chart: {
                            zoomType: 'x'
                        },
                        title: {
                            text: 'YadaCoin hash rate chart'
                        },
                        subtitle: {
                            text: document.ontouchstart === undefined ?
                                'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'
                        },
                        xAxis: {
                            type: 'block height'
                        },
                        yAxis: {
                            title: {
                            text: 'hash rate'
                            }
                        },
                        legend: {
                            enabled: true
                        },
                        plotOptions: {
                            area: {
                            fillColor: {
                                linearGradient: {
                                x1: 0,
                                y1: 0,
                                x2: 0,
                                y2: 1
                                },
                                stops: [
                                [0, Highcharts.getOptions().colors[0]],
                                [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                                ]
                            },
                            marker: {
                                radius: 2
                            },
                            lineWidth: 1,
                            states: {
                                hover: {
                                lineWidth: 1
                                }
                            },
                            threshold: null
                            }
                        },

                        series: [{
                            type: 'area',
                            name: 'YadaCoin Hash Rate',
                            data: data
                        }]
                        });
                    }
                    );
                </script>
                <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto" class="bg-dark"></div>
            </section>
        </div>
    </main>
    {% with %}
        {% include 'footer.html'  %}
    {% endwith %} 
</body>
</html>